# Bluetooth LE Demo

This demo showcases **Bluetooth Low Energy (BLE) GATT** integration in a .NET MAUI app to communicate with IoT sensors and actuators. The MobileIoT app acts as a BLE *client* that connects to a BLE *server* running on a device like a Raspberry Pi. Once connected, the app can **read environmental sensor data and control hardware** on the IoT device over BLE.

* **Purpose:** Demonstrate reading sensor values (temperature and humidity) and controlling an LED on an IoT device via BLE. For example, a Raspberry Pi running a BLE GATT server exposes a custom service with characteristics for temperature, humidity, and LED state. The app connects to this service to retrieve sensor readings from a DHT22 sensor and to send commands to toggle an LED.
* **How it Works:** The MAUI app scans for a known BLE device (advertised as *“PiDHTSensor”*) and establishes a GATT connection. It then discovers the service and characteristics using predefined UUIDs. The app enables notifications on the temperature and humidity characteristics, so it receives sensor updates from the IoT device. When the user taps “Refresh Sensor,” the app triggers a read of the latest temperature and humidity values via those characteristics. The demo also includes an **LED control** button: when tapped, the app writes to the LED characteristic (sending a `1` or `0` value) to turn the device’s LED on or off.
* **Connect/Disconnect:** A dedicated button lets you connect to the sensor device and disconnect when finished.
* **IoT Components:** This BLE demo highlights *wireless sensor monitoring* and *remote actuator control*. The IoT device (e.g. Raspberry Pi with a DHT22 sensor and LED) runs a BLE server that the mobile app interacts with. **Bluetooth Low Energy** is used as the communication protocol, which is energy-efficient for IoT scenarios. Developers can see how .NET MAUI, via a cross-platform BLE library, handles device discovery, GATT characteristic subscription, and read/write operations to integrate mobile apps with BLE-based hardware.

Overall, the Bluetooth LE demo illustrates how a .NET MAUI app can serve as a control panel or data reader for a BLE-equipped IoT device – reading real-time sensor data and sending commands to control hardware. This pattern is common in IoT mobile applications, enabling smartphones to interact with smart sensors, beacons, and embedded devices seamlessly.

# BLE Beacon Demo

This demo focuses on **BLE beacon scanning** – the app listens for Bluetooth LE advertising packets (such as iBeacon transmissions) to detect nearby devices. The .NET MAUI application acts as a scanner that continuously monitors for BLE advertisements and displays information about any beacons in range. This showcases how mobile apps can be used to detect IoT devices or tags broadcasting identification or telemetry.

* **Purpose:** Demonstrate how to use BLE to discover and monitor beacons or advertising IoT devices. For example, a Raspberry Pi can be configured to broadcast an iBeacon advertisement with a specific UUID. The MobileIoT app’s beacon demo will pick up such advertisements and list them, illustrating proximity detection and data decoding from BLE beacons.
* **How it Works:** When this demo is active, the app starts a BLE scan (using platform-specific APIs on Android and iOS) with no filters, so it receives advertisement callbacks for any nearby BLE device. Each discovered advertisement is processed to extract details like the device’s identifier (MAC address or UUID), signal strength (RSSI), and raw advertisement payload. The app UI updates to show a list of detected beacons/devices, including their name (if available), current RSSI, and a preview of the advertisement data. The scanning runs continuously, allowing real-time updates (for example, RSSI changes can indicate distance changes).
* **IoT Integration:** **Bluetooth Beacon technology** is often used in IoT for location awareness, asset tracking, or presence detection. This demo shows how a .NET MAUI app can serve as a beacon scanner – useful for developers building apps that need to respond when certain BLE beacons are nearby. It uses BLE **advertising protocols** (like iBeacon) to identify devices. The IoT significance is that the mobile app can discover devices without pairing, just by listening for broadcast signals. In a real scenario, the beacon might represent a sensor broadcasting data or an ID tag on equipment. The demo gives a starting point for handling advertisement data and signal strength to build IoT solutions like indoor positioning or device discovery.

Developers can refer to this demo to learn how .NET MAUI interfaces with underlying Bluetooth LE scan APIs to capture beacon information. It emphasizes detecting and reading broadcast data from IoT devices in the field, a common requirement for location-based IoT applications.

# NFC Demo

The NFC demo shows how a .NET MAUI app can interact with **Near Field Communication (NFC)** tags for reading and writing data. It demonstrates using the smartphone’s NFC hardware to scan NFC tags (such as NTAG or Mifare stickers, cards, etc.) and to write NDEF messages to them. This is an important IoT integration, as NFC tags are often used for identification, configuration, or inventory in IoT systems.

* **Purpose:** Showcase reading data from an NFC tag and writing data to a tag using a cross-platform approach. In this demo, the app can detect an NFC tag placed near the device and read its content, expecting text data (NDEF text records). It also allows the user to input some text and then write that to an NFC tag, effectively programming the tag with a new message. This illustrates how developers can build MAUI apps that read sensor identifiers, configuration info, or any small data from NFC stickers, as well as configure tags for IoT tasks.
* **How it Works:** When the user starts an NFC scan (“Start Scan”), the app enables NFC listening mode using a Xamarin/MAUI NFC plugin. The app will then wait for a tag to come into proximity. When an NFC tag is tapped to the device, the app reads its NDEF records. If the tag contains a well-known text record, the demo captures that text and displays it on screen (for example, showing a URL or sensor ID encoded in the tag). Conversely, if the user enters text and presses the **Write** button, the app enters write mode: it prepares an NDEF record containing that text and waits for an NFC tag. When a tag is brought close, the app writes the new NDEF message to the tag (overwriting its previous content, assuming the tag is writable). After writing, the tag will carry the new text data.
* **IoT Components:** **NFC technology** in mobile apps enables very short-range data exchange with physical objects. This demo highlights integration with **NFC tags** – common IoT use cases include reading asset tags or configuring devices by tapping a phone to a tag. The app uses the device’s NFC reader hardware: on Android it uses the NFC adapter in reader/writer mode, and on iOS it leverages Core NFC (with the plugin simplifying usage). The communication protocol here is **NDEF (NFC Data Exchange Format)** for structured messages. By focusing on text records, the demo keeps it simple, but the same approach can be used for URLs, MIME data, or custom record types. Developers can learn how MAUI handles the permission and activation of NFC, as well as the asynchronous nature of tag detection.

In summary, the NFC demo demonstrates **mobile-to-tag interaction** in an IoT context. A developer could use this as a foundation for scenarios like scanning an IoT device’s configuration tag to get its network info or writing calibration data to a sensor’s NFC tag. It emphasizes the ease of using .NET MAUI to access native NFC capabilities for IoT workflows.

# NFC Peer-to-Peer Demo

The NFC Peer-to-Peer demo highlights device-to-device communication using NFC, specifically Android’s **NFC peer-to-peer (Android Beam)** functionality. In this scenario, two smartphones (or a phone and another NFC-capable device) can exchange data by bringing them into close contact. The .NET MAUI app demonstrates sending a simple message via NFC and receiving an NDEF message from another device, showcasing an alternative wireless channel for ad-hoc data transfer relevant to IoT or device pairing contexts.

* **Purpose:** Show how a MAUI app can initiate and handle direct NFC data exchange with another device. The demo’s goal is to send a short text string (e.g., “Hello World”) from one device to another using NFC, without needing an internet connection or Bluetooth pairing. This can be useful for IoT scenarios like touch-to-configure: for instance, transferring a small configuration payload or authentication token from a phone to an IoT device that has NFC, or between two user devices for setup. It also listens for incoming NFC messages from a peer device.
* **How it Works:** On Android, the app uses the NFC adapter’s peer-to-peer mode. When the user taps “Start P2P,” the app registers an NDEF message to share. The message in this demo is a MIME-type record containing the text “Hello World.” With this mode active, if another NFC device comes into range (for example, another phone running the same app or any device expecting an NFC message), the system will automatically transfer the NDEF message to the peer (this is the Android Beam functionality). The user simply touches the devices together – upon connection, the “Hello World” message is beamed to the other device. Conversely, if an external NFC message is received (for instance, another device sends an NDEF payload), the app will catch it via an event. The demo code handles the NFC intent when an NDEF message is discovered, parses the incoming NDEF record, and could display the received text or act on it (for simplicity, the demo might log it).
* **Platform Notes:** **Android** fully supports this NFC peer-to-peer exchange and the demo is implemented for Android devices. **iOS** does **not** support arbitrary peer-to-peer NFC data exchange in the same way, so this feature is not available on iPhones (the app’s iOS implementation for NFC P2P is disabled with a not-supported message). This is an important note for cross-platform developers: some NFC capabilities are platform-specific. The demo still serves as a guide for Android developers on using `NfcAdapter` callbacks for Beam.
* **IoT Use Cases:** Peer-to-peer NFC can simplify bootstrapping connectivity or configuration for IoT devices. For example, an IoT device without full keyboard or UI might use NFC to receive Wi-Fi credentials from a phone. This demo provides a basic template for sending a small payload via a tap. It emphasizes how .NET MAUI can integrate with platform-specific NFC APIs to achieve close-range data transfer. Developers can expand on this by packaging structured data (using NDEF records) to send configurations or keys to devices. Even though modern Android versions have deprecated the old “Android Beam” in favor of alternatives, the concept remains useful for certain scenarios and this demo gives a starting point for experimenting with NFC-based device-to-device communication.

# USB Bulk Ping Demo

The USB Bulk Ping demo illustrates how a .NET MAUI app can communicate with an IoT device over a direct USB connection using raw bulk data transfers. This scenario treats the mobile device as a USB host and the IoT device (e.g., a Raspberry Pi configured in USB gadget mode) as a USB peripheral. The focus is on sending binary data and receiving a response, demonstrating low-level device communication without network or Bluetooth – useful for high-throughput data or when wireless is not available.

* **Purpose:** Show developers how to integrate **USB communications** into a MAUI app for IoT. In this demo, the app connects to a USB device and performs a simple ping-pong test: it sends a specific data packet (“PING”) to the device and waits for a response. The IoT side (for example, a Raspberry Pi running the Linux USB *g\_zero* gadget) is set up to echo back any data it receives on the bulk endpoint. The successful round-trip of the “PING” message confirms that the MAUI app can exchange data with the device over USB.
* **How it Works:** When the user hits **Connect**, the app scans the phone’s USB host for attached devices. If the Raspberry Pi (or another target device) is connected via USB and identified, the app opens it. On Android, this uses USB host APIs to claim the interface and endpoints of the gadget device. Once open, the UI shows a connection log. The user can then press **Send Ping**, which triggers the app to send a 4-byte sequence (the ASCII letters `PING`) over the USB bulk OUT endpoint. The app then immediately listens on the bulk IN endpoint for a response. In our demo, the Pi’s gadget is an echo device, so it sends back the same 4 bytes. The app reads those bytes and logs that it received data (e.g., “RX 4 bytes”). This confirms communication: the IoT device responded to the host’s command.
* **IoT Integration:** This demo highlights a scenario where a mobile device communicates directly with an IoT device via a USB cable (wired IoT integration). **USB bulk endpoints** are typically used for high-speed data transfer (like sending sensor data logs, firmware updates, or camera streams). In the context of the demo, the data is just a ping, but the pattern could be extended to any custom protocol. The important takeaway is that .NET MAUI can access USB hardware interfaces. On Android, the phone can act as USB host (USB **OTG**) to power and communicate with devices like a Pi. The code handles device enumeration and uses the Android USB API to send and receive bytes at a low level. On iOS, direct USB hosting is restricted – the demo’s functionality on iOS is provided via the External Accessory framework (for MFi-compliant devices), meaning a standard Pi gadget wouldn’t be recognized unless it were an approved accessory. However, the structure of the code is cross-platform, abstracting the USB operations.
* **Key Components:** The demo involves **Vendor ID/Product ID detection**, opening a device interface, and performing write/read operations. It doesn’t implement a complex protocol – just a simple echo test – keeping the focus on the mechanics of USB transfer. Developers can use this as a template to build features like a mobile app configuring an IoT device via USB or reading sensor data in bulk from a device when plugged in. It underscores that even without network connectivity, mobile apps can directly interact with IoT hardware through USB (for power-critical or offline scenarios).

# USB Serial Demo

The USB Serial demo showcases using a .NET MAUI app to communicate with an IoT device over a serial connection via USB (often presented as a virtual COM port). In this case, a Raspberry Pi is configured as a USB CDC ACM device – essentially appearing as a serial port over USB to the mobile app. This demo is about sending text-based commands to the IoT device and receiving responses, illustrating a classic control interface for hardware.

* **Purpose:** Demonstrate a simple **command/response protocol** over a serial link between mobile and an IoT device. The MobileIoT app opens the serial connection and alternately sends the commands `"LED_ON"` and `"LED_OFF"` to the connected device. These commands instruct the IoT device (e.g., the Pi) to toggle an LED on one of its GPIO pins. The Pi’s firmware or script recognizes the commands and changes the LED state accordingly, then replies with an acknowledgment (which could be a simple message or echo). The app receives and displays these responses. This setup mimics a common IoT scenario: a device controlled by simple text commands over a serial link (which could be USB, Bluetooth SPP, etc.).
* **How it Works:** Upon starting the demo, the user taps **Connect**, and the app scans for any attached USB serial devices. If the Raspberry Pi (in gadget serial mode) is connected, it will enumerate as a USB CDC device. The app, using the underlying OS capabilities, opens the first available serial port with a specified baud rate (e.g. 9600 baud). Once connected, the UI might log “Connected” to indicate the serial link is open. The user can then press a **Send** button (or it could be automated on a timer) which triggers sending the next LED command. The app keeps an internal state (`_ledOn` flag) to alternate between sending `"LED_ON"` and `"LED_OFF"` each time. After sending, it logs the transmitted command (“TX: LED\_ON” for example). The IoT device, upon receiving the command through its serial port, toggles the LED (e.g., turning it on or off on a GPIO like GPIO17) and then sends back a response, such as an acknowledgment string. The MAUI app’s serial listener captures any incoming data via an event and displays it (prefacing it with “RX: ...”). In the demo code, every time data is received on the serial port, it’s converted from bytes to text and appended to the on-screen log.
* **IoT Integration:** This serial communication pattern is very common for IoT devices, especially during development or for configuration. It shows how a smartphone can directly interface with microcontrollers or single-board computers using a serial console or command interface. By using the **USB CDC ACM protocol** (which creates a virtual COM port), the demo bypasses the need for network stacks – communication is immediate and reliable as long as the device is plugged in. The .NET MAUI app, through its cross-platform abstraction, handles serial port enumeration and I/O on both Android and iOS. (On Android, the phone acts as USB host with the Pi as a gadget device; on iOS, support is via the External Accessory framework for serial devices, which requires compatible hardware). From a developer’s perspective, this demo is a blueprint for building companion apps that can configure IoT devices, retrieve logs, or control actuators using simple text commands. It underlines the fact that MAUI apps can leverage **legacy serial protocols** in modern apps – useful for backward compatibility with many existing IoT systems.
* **Key Components:** The demo involves **USB permission handling**, opening a serial driver, setting a baud rate, and asynchronous read/write of data. It uses event-driven updates to show incoming data. In the provided example, the focus is on LED control (a tangible hardware interaction) and acknowledging responses. Developers can expand this concept to send different commands (e.g., sensor read requests) and handle responses accordingly. The USB Serial demo thus provides a clear example of integrating mobile apps with IoT hardware using straightforward serial protocols.

# Wi-Fi Direct Demo

The Wi-Fi Direct demo explores peer-to-peer wireless communication between devices using Wi-Fi, without requiring a traditional network infrastructure or router. It demonstrates how a .NET MAUI app can discover other devices, connect directly to them, and exchange data using **Wi-Fi Direct on Android** and **Multipeer Connectivity on iOS**. This is particularly relevant for IoT scenarios where devices need to form local clusters or one-to-one links for high-speed data transfer or offline communication (for instance, a mobile device directly communicating with an IoT appliance or another smartphone in the field).

* **Purpose:** Show how to establish a direct wireless link between devices for data exchange. In this demo, one device can search for peers and connect to them, then they can send messages to each other. This could be used in IoT for things like commissioning a device (phone connects to a device’s temporary Wi-Fi Direct hotspot to configure it), or for a group of devices to share data without a central network. The demo provides a foundation by handling discovery, connection, and sending a test message (“ping”) between peers.
* **How it Works (Android):** When the user starts **Discovery**, the app initiates Wi-Fi Direct (also known as Wi-Fi P2P) discovery on Android. The underlying service (WifiDirectService on Android) will broadcast for nearby Wi-Fi Direct capable devices. Discovered peers could be listed in the UI (e.g., by name or ID). The user can then select a peer and tap **Connect**, which uses the Wi-Fi Direct APIs to form a p2p connection (creating a group if necessary). Once connected, the devices establish a direct socket communication channel. The app can then **Send Ping**, which sends a small data packet (for example, the text "ping") to the connected peer. On the receiving side, the app's receive listener gets that data and could display a message or log it. The demo likely also allows sending arbitrary text messages to a specific peer (for instance, through a simple chat-like interface), showcasing two-way communication. A **Stop** function stops discovery or disconnects the session.
* **How it Works (iOS):** On iOS, Wi-Fi Direct per se is not exposed, but similar functionality is achieved via the **Multipeer Connectivity** framework. The app uses an abstraction (IP2PService) that is implemented with MultipeerService on iOS. It will advertise the device and browse for others using a specific service ID. When peers are found and the user connects, iOS establishes an ad-hoc Wi-Fi or Bluetooth link under the hood between the devices. Data sending and receiving is analogous – the app can send a “ping” or any text to the peer, and the Multipeer framework delivers it to the other side. The code is written to be platform-agnostic, so developers can use the same interface to handle both Android and iOS differences.
* **IoT Applications:** **Wi-Fi Direct** is useful in IoT for scenarios like direct phone-to-device communication (configuration of smart devices, file transfers from an IoT camera to phone, etc.) or device-to-device networks in the field (e.g., drones or robots coordinating via peer network). This demo shows how a MAUI app can enable such communications. It covers **peer discovery, secure pairing, and data exchange** without a router. For instance, a maintenance app could connect to a machine via Wi-Fi Direct to download logs. The demo's simple ping/message exchange is a placeholder for these richer interactions. Developers can build on this to send JSON commands, stream data, or create mesh networks.
* **Key Components:** The demo integrates low-level networking with the MAUI app model. It deals with permissions (Wi-Fi and network discovery permissions on Android), service advertising, and maintaining a list of available peers. Once connected, it uses sockets/streams to send and receive data. The MAUI app updates the UI to reflect peer connectivity and message logs. By abstracting the functionality in an IP2PService interface, the code demonstrates a clean separation of platform specifics from shared logic. This is a great example of using .NET MAUI for complex networking tasks in IoT – enabling cross-platform peer communication so that devices and mobile apps can form their own local networks when needed.

Each of these demos – from BLE and NFC to USB and Wi-Fi Direct – underscores a different aspect of **.NET MAUI with IoT integrations**. They focus on how the mobile app interacts with hardware or sensors using various communication protocols and standards, providing developers with patterns and examples to follow when building robust IoT-enabled mobile applications. The explanations above emphasize the unique device interaction logic in each demo, helping developers understand the purpose and implementation of the IoT functionality being demonstrated.&#x20;
